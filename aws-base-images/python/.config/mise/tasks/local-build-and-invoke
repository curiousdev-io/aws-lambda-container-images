#!/usr/bin/env bash
#MISE description="Build the Docker image and invoke the function locally"
set -euo pipefail

# Build the image
if ! mise run create-image; then
  echo "[!] Failed to build the Docker image. Aborting."
  exit 1
fi

echo "[*] Docker image built successfully."

# Invoke the function locally
if ! mise run local-invoke; then
  echo "[!] Failed to invoke the function locally. Aborting."
  exit 1
fi

echo "[*] Local invocation completed successfully."
